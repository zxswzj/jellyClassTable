<view class="body"><view class="ruler"><view class="uni-flex">ruler</view></view><view class="main"><view class="head"></view><view class="table"><block wx:for="{{$root.l0}}" wx:for-item="item1" wx:for-index="i" wx:key="i"><view hidden="{{!(item1.m0)}}" class="{{['col-frame',[(item1.m1)?'emphasis':'']]}}" style="{{'height:'+(projs.tableHeight+'px')+';'}}" data-class="{{item1.$orig}}" data-x="{{i}}" data-event-opts="{{[['tap',[['onNewClass',['$event']]]],['longpress',[['onNewClass',['$event']]]]]}}" catchtap="__e" catchlongpress="__e"><block wx:for="{{item1.$orig.classes}}" wx:for-item="item2" wx:for-index="j" wx:key="j"><view class="{{['item-frame',colorList[item2.colorIdx]]}}" style="{{'margin-top:'+(item2.margintop+'px')+';'+('height:'+(item2.height+'px')+';')}}" id="class" data-class="{{item2}}" data-x="{{i}}" data-y="{{j}}" data-event-opts="{{[['longpress',[['onEditClass',['$event']]]],['tap',[['onEditClass',['$event']]]]]}}" catchlongpress="__e" catchtap="__e"><view class="test" style="background-color:#00897B;"></view><view class="test" style="background-color:#0066CC;"></view><view class="test" style="background-color:#00ff00;"></view></view></block></view></block></view></view><uni-drawer vue-id="1" visible="{{showPop}}" mode="right" data-event-opts="{{[['^close',[['e0']]]]}}" bind:close="__e" bind:__l="__l" vue-slots="{{['default']}}"><view class="pop-top-view"><view class="pop-item-base"><view class="pop-title">课程</view><input data-event-opts="{{[['input',[['onUpdateClassName',['$event']]]]]}}" class="pop-input" value="{{currentClass.name}}" bindinput="__e"/></view><view class="pop-item-base"><view class="pop-title">日期</view><radio-group name="week"><label data-event-opts="{{[['tap',[['onChangeWeekday',['monday']]]]]}}" class="radio-bg" bindtap="__e"><radio value="monday" checked="{{currentClass.weekday=='monday'}}"></radio><text class="pop-text">周一</text></label><label data-event-opts="{{[['tap',[['onChangeWeekday',['tuesday']]]]]}}" class="radio-bg" bindtap="__e"><radio value="tuesday" checked="{{currentClass.weekday=='tuesday'}}"></radio><text class="pop-text">周二</text></label><label data-event-opts="{{[['tap',[['onChangeWeekday',['wednesday']]]]]}}" class="radio-bg" bindtap="__e"><radio value="wednesday" checked="{{currentClass.weekday=='wednesday'}}"></radio><text class="pop-text">周三</text></label><label data-event-opts="{{[['tap',[['onChangeWeekday',['thursday']]]]]}}" class="radio-bg" bindtap="__e"><radio value="thursday" checked="{{currentClass.weekday=='thursday'}}"></radio><text class="pop-text">周四</text></label><label data-event-opts="{{[['tap',[['onChangeWeekday',['friday']]]]]}}" class="radio-bg" bindtap="__e"><radio value="friday" checked="{{currentClass.weekday=='friday'}}"></radio><text class="pop-text">周五</text></label><label data-event-opts="{{[['tap',[['onChangeWeekday',['saterday']]]]]}}" hidden="{{!(cfg.daysMode)}}" class="radio-bg" bindtap="__e"><radio value="saterday" checked="{{currentClass.weekday=='saterday'}}"></radio><text class="pop-text">周六</text></label><label data-event-opts="{{[['tap',[['onChangeWeekday',['sunday']]]]]}}" hidden="{{!(cfg.daysMode)}}" class="radio-bg" bindtap="__e"><radio value="sunday" checked="{{currentClass.weekday=='sunday'}}"></radio><text class="pop-text">周日</text></label></radio-group></view><view class="pop-item-base"><view class="pop-title">开始时间</view><view class="pop-title">{{$root.m2}}</view><view hidden="{{!(currentClass.time>=1200)}}" class="pop-text-warning">太晚了吧，救救孩子</view></view><view class="pop-item-base" style="{{'justify-content:'+('space-between')+';'+('align-items:'+(center)+';')}}"><view data-event-opts="{{[['tap',[['onSubClassTime',['$event']]]]]}}" class="slide-sub-btn pop-title" bindtap="__e">-</view><slider style="flex:1;" value="{{currentClass.time}}" max="1439" step="5" data-event-opts="{{[['change',[['sliderClassTimeChange',['$event']]]],['changing',[['sliderClassTimeChange',['$event']]]]]}}" bindchange="__e" bindchanging="__e"></slider><view data-event-opts="{{[['tap',[['onAddClassTime',['$event']]]]]}}" class="slide-add-btn pop-title" bindtap="__e">+</view></view><view class="pop-item-base"><view class="pop-title">时长</view><view class="pop-title">{{$root.m3}}</view><view hidden="{{!(currentClass.dur>=240)}}" class="pop-text-warning">时间太长了吧，救救孩子</view></view><view class="pop-item-base" style="{{'justify-content:'+('space-between')+';'+('align-items:'+(center)+';')}}"><view data-event-opts="{{[['tap',[['onSubClassDur',['$event']]]]]}}" class="slide-sub-btn pop-title" bindtap="__e">-</view><slider style="flex:1;" value="{{currentClass.dur}}" max="{{durMax}}" step="5" data-event-opts="{{[['change',[['sliderClassDurChange',['$event']]]],['changing',[['sliderClassDurChange',['$event']]]]]}}" bindchange="__e" bindchanging="__e"></slider><view data-event-opts="{{[['tap',[['onAddClassDur',['$event']]]]]}}" class="slide-add-btn pop-title" bindtap="__e">+</view><view data-event-opts="{{[['tap',[['onExtendClassDurMax',['$event']]]]]}}" hidden="{{!(currentClass.dur>=240)}}" class="radio-1" bindtap="__e">></view></view><view class="pop-item-base" style="flex-flow:row wrap;"><view class="pop-title">颜色</view><block wx:for="{{colorList}}" wx:for-item="item" wx:for-index="i" wx:key="*this"><view class="{{['pop-color-block',[(i==currentClass.colorIdx)?'popColorBlockSelected':''],item]}}" data-color="{{item}}" data-index="{{i}}" data-event-opts="{{[['tap',[['onSelectColor',['$event']]]]]}}" bindtap="__e"></view></block></view><view class="pop-item-base" style="flex-flow:row wrap;"><button hidden="{{!(showPop==1)}}" type="primary" data-event-opts="{{[['tap',[['submitUpdateClass',['$event']]]]]}}" bindtap="__e">修改</button><button hidden="{{!(showPop==2)}}" type="primary" data-event-opts="{{[['tap',[['submitAddClass',['$event']]]]]}}" bindtap="__e">增加</button><button type="default" data-event-opts="{{[['tap',[['cancelCreateProj',['$event']]]]]}}" bindtap="__e">取消</button><button type="warn" data-event-opts="{{[['tap',[['onDeleteCurrClass',['$event']]]]]}}" bindtap="__e">删除</button></view></view></uni-drawer></view>